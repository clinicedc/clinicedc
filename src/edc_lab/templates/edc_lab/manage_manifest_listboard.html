{% extends "edc_lab/listboard.html" %}

{% block panel_back %}
    <a title="Back to manifests" role="button" class="btn btn-default btn-sm"
        href="{% url manifest_listboard_url_name %}"><i class="fa fa-reply fa-fw"></i>
    </a>
{% endblock panel_back %}


{% block panel_description %}                    
     <span class="label label-success">Manifest</span> 
     <span class="text text-identifier"><strong>{{ manifest.human_readable_identifier }}</strong></span> 
     <span class="label label-success">Date</span> {{ manifest.manifest_datetime|date:"Y-m-d" }} 
{% endblock panel_description %}

{% block results_panel_form %}

    <form action="{{ form_action_url }}" method="post" id="{{ form_action_name }}" name="{{ form_action_name }}">
    <div class="form-group form-inline">
        <div class="input-group input-group-sm">
        <input class="form-control" type="text" form="{{ form_action_name }}" id="manifest_item_identifier" name="manifest_item_identifier" placeholder="box identifier" autofocus />
        <div class="input-group-btn">
        <button type="submit" class="btn btn-default btn-sm" id="action" name="action" value="add_item" form="{{ form_action_name }}">
             <i class="fa fa-plus fa-sm"></i>
        </button>
        </div>
        </div>
        <button type="submit" class="btn btn-default btn-sm" id="action" name="action" value="remove_selected_items" form="{{ form_action_name }}">
             <span class="text text-danger"><i class="fa fa-window-close fa-sm"></i></span> &nbsp;Remove selected
        </button>
    </div>
    {% csrf_token %}
    </form>
{% endblock results_panel_form %}

{% block results_header %}
    {% include 'edc_lab/listboard/pack/results_header.html' %}
{% endblock results_header %}

{% block results_body %}
    {% for wrapped in object_list %}
    <tr>
 	    <!--counter-->
	    <td>{{ page_obj.start_index|add:forloop.counter0 }}</td>
	    <!--buttons-->
    <!-- begin columns -->

    <td>
      <input id="selected_item_{{wrapped.wrapped_object.id}}" form="{{ form_action_name }}" name="{{ form_action_selected_items_name }}" type="checkbox" value="{{wrapped.wrapped_object.id}}" />
    </td>
    <td>
        <div class="btn-group">
           <a title="Edit box" role="button" href="{{ wrapped.href }}" class="btn btn-default btn-sm"><i class="fa fa-pencil fa-fw"></i></a>
           <a role="button" href="{% url manage_box_listboard_url_name box_identifier=wrapped.box_identifier action_name='manage' %}" class="btn btn-default btn-sm">Manage</a>
           <a role="button" href="{% url manifest_listboard_url_name %}" class="btn btn-default btn-sm {% if not wrapped.verified %}disabled{% endif %}">Ship</a>
        </div>&nbsp;
    </td>
    <td>
      <span class="text text-identifier">
      {{ wrapped.identifier }}
      </span>
    </td>
    <td>
      {{ wrapped.box.count }}/{{ wrapped.box.box_type.total }}&nbsp;
      ({{ wrapped.box.specimen_types }})
    </td>
    <td>
      {{ wrapped.wrapped_object.get_status_display }}
    </td>
    <td>
      {{ wrapped.user_created }}
    </td>
    <td>
      {{ wrapped.box_datetime|date:"Y-m-d H:i" }}
    </td>

<!-- end columns -->
    
  </tr>

{% endfor %}
    
    
{% endblock results_body %}

