{% extends "edc_lab/base_listboard.html" %}

{% load tz %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block main %}
<div class="container">
   <div class="row">
      <div class="col-md-12">

		{% block alert %}
		
			{% if messages %}
			    {% for message in messages %}
			        {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
			        <div class="alert alert-danger alert-dismissable fade in">
			        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>           
			          <i class="fa fa-hand-stop-o fa-lg"></i> {{ message }}
			        </div>
			        {% endif %}
			        {% if message.level == DEFAULT_MESSAGE_LEVELS.WARNING %}
			        <div class="alert alert-warning alert-dismissable fade in">
			        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>           
			          <i class="fa fa-hand-stop-o fa-lg"></i> {{ message }}
			        </div>
			        {% endif %}
			        {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
			        <div class="alert alert-success alert-dismissable fade in">
			        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>           
			          <i class="fa fa-thumbs-o-up fa-lg"></i> {{ message }}
			        </div>
			        {% endif %}
			        {% if message.level == DEFAULT_MESSAGE_LEVELS.INFO %}
			        <div class="alert alert-info alert-dismissable fade in">
			        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>           
			          <i class="fa fa-hand-stop-o fa-lg"></i> {{ message }}
			        </div>
			        {% endif %}
			    {% endfor %}
			{% endif %}
		
		{% endblock alert %}


        <div class="panel-group">
          <div class="panel panel-success">
            <div class="panel-heading clearfix">
                <div class="row">
                   <div class="col-sm-8">   
                   {% block action_form %}
                                       
                    <a title="Back to list of boxes" role="button" class="btn btn-default btn-sm" href="{% url pack_listboard_url_name %}"><i class="fa fa-reply fa-fw"></i></a>
                    &nbsp; <span class="text"> 
                        <span class="label label-success">Box {{ box.name }}</span> 
                        <span class="label label-success">{{ box.get_category_display }}</span> 
                        <span class="label label-success">{{ box.specimen_types }}</span> 
                        {% if box.accept_primary %}
                            <span class="label label-success">accepts primary</span>
                        {% endif %}
                        <span class="label label-success">{{ box.box_type }}</span> 
                        <span class="label label-success">{{ box.count}}/{{ box.box_type.total}}</span> 
                        <span class="label label-success">{{ box.box_datetime|date:"Y-m-d" }}</span> 
                        </span>
                   {% endblock action_form %}
                   </div>
                   <div class="col-sm-4">   
                    {% include 'edc_dashboard/search_form.html' %}
                   </div>
                </div>
                </div>
            </div>
            <div class="panel-body">

			<div class="form-group">
			    <form action="{% url manage_box_item_url_name box_identifier=box_identifier %}" method="post" name="form_boxitem" id="form_boxitem">
			     <div class="form-inline">
			     <div class="input-group input-group-sm">
			       <input class="form-control" type="text" id="box_item_identifier" name="box_item_identifier" value="" placeholder="aliquot identifier" autofocus />
			       <span class="input-group-btn">
			       <button type="submit" class="btn btn-default btn-sm" id="box_action" name="box_action" value="add_item" form="form_boxitem">
			            <i class="fa fa-plus fa-sm"></i>
			       </button>
			       </span>
			       </div>
			       <button type="submit" class="btn btn-default btn-sm" id="box_action" name="box_action" value="renumber_items" form="form_boxitem">
			            <i class="fa fa-sort-numeric-desc fa-sm"></i> &nbsp;Renumber
			       </button>
			       <button type="submit" class="btn btn-default btn-sm" id="box_action" name="box_action" value="remove_selected_items" form="form_boxitem">
			            <span class="text text-danger"><i class="fa fa-window-close fa-sm"></i></span> &nbsp;Remove selected
			       </button>
			       <input type="hidden" id="box_identifier" name="box_identifier" value="{{ box_identifier }}" />
			       {% csrf_token %}
			      </div>
			    </form>
			</div>

              <!--start results-->
                <div class="form-group">
                  <div class="table table-responsive">
                    <table class="table table-condensed table-hover small">
                      <thead>

                        {% include 'edc_lab/listboard/box/results_header.html' %}

                      </thead>
                      <tbody>

                        {% include 'edc_lab/listboard/box/results_body.html' %}

                      </tbody>
                    </table>

                    {% include 'edc_dashboard/paginator.html' %}

                  </div>
              </div>
                  
              <!--end results-->

            </div>
          </div>
                    
        </div>
      </div>
    </div> 
  </div>

{% endblock main %}