{% extends 'edc_base/base.html' %}

{% load staticfiles %}

{% block extra-scripts %}
    <script type="text/javascript" charset="utf8" src="{% static "edc_label/js/edc_label.js" %}"></script>
    <script type="text/javascript" charset="utf8" class="init">
      $(document).ready( function () {
        edcLabelReady("{{ label_templates|escapejs }}", "{{ print_server_error|escapejs }}");
      })
    </script>
{% endblock extra-scripts %}

{% block main %}

 <div class="container">

          {% if messages %}
              {% for message in messages %}
                <div id="alert-print-server-error" class="alert alert-danger"><i class="fa fa-warning fa-lg"></i> {{ message }}</div>
              {% endfor %}
          {% endif %}

    <form action="{% url 'edc_label:change_session_printer' clinic_label_printer_attr %}" method="post">
        {% csrf_token %}
      <div class="form-group">
        <label for="{{ clinic_label_printer_attr }}">Your clinic label printer:</label>
            <select class="form-control" id="{{ clinic_label_printer_attr }}" name="{{ clinic_label_printer_attr }}" onchange="submit();">
            {% for printer_name in printers %}
               <option {% if printer_name == clinic_label_printer %}selected{% endif %} >{{ printer_name }}</option>
            {% endfor %}
          </select>
      </div>
    </form>


    <form action="{% url 'edc_label:change_session_printer' lab_label_printer_attr %}" method="post">
        {% csrf_token %}
      <div class="form-group">
        <label for="{{ lab_label_printer_attr }}">Your lab label printer:</label>
            <select class="form-control" id="{{ lab_label_printer_attr }}" name="{{ lab_label_printer_attr }}" onchange="submit();">
            {% for printer_name in printers %}
               <option {% if printer_name == lab_label_printer %}selected{% endif %} >{{ printer_name }}</option>
            {% endfor %}
          </select>
      </div>
    </form>

            <div class="col-md-12">
                  <div id="alert-print-server-wait" class="alert alert-info">Contacting print server @ {{ default_cups_server_ip|default:"printer server unknown!" }} ... please wait<span class="fa fa-refresh fa-spin pull-right"></span></div>
            </div>
            <div id="div-print-server-error" class="col-md-12">
                  <div id="alert-print-server-error" class="alert alert-danger" style="display:none"></div>
            </div>
            <div id="div-print-error" class="col-md-12">
                  <div id="alert-print-error" class="alert alert-danger" style="display:none"></div>
            </div>
            <div id="div-print-success" class="col-md-12">
                  <div id="alert-print-success" class="alert alert-success" style="display:none"></div>
            </div>
    <div id="div-home-left" class="col-md-6">
    
          <div class="panel panel-default">
            <div class="panel-heading">Label Templates</div>
                <div class="panel-body">
                  <table id="tbl-label-templates" class="table table-striped table_responsive">
                  <thead><th>Name</th><th>Label</th><th>File</th><th></th></thead>
                  </table>
                </div>
          </div>

    </div><!--div-home-left -->

    <div id="div-home-right" class="col-md-6">

          <div class="panel panel-warning">
            <div id="div-printers-panel" class="panel-heading">Printers@{{ default_cups_server_ip }}</div>
                <div class="panel-body">
                <table id="tbl-printers" class="table table-striped table_responsive">
                <thead><th>Name</th><th>Make</th><th>Location</th><th>Shared</th><th>Status</th></thead>
                </table>
                </div>
          </div>

    </div><!--div-home-right -->

</div> <!-- container -->
{% endblock main %}
